R-type Project                                                      Garcia Théo
Request for Comments: XXXX                                              Epitech
Category: Experimental                                              Desert Axel
                                                                        Epitech
                                                   Goncalves dos santos Raphaël
                                                                        Epitech
                                                              Racine Aleksandra
                                                                        Epitech
                                                                Houplain Hélène
                                                                        Epitech
                                                                       Dec 2025
                            R-type Game Protocol

Status of This Memo

    This document is part of a student project and does not represent a
    standard of any kind. It is published for educational purposes and as a
    demonstration of protocol design. Distribution of this memo is
    unrestricted.

Abstract

    This document specifies the textual protocol used for a simple multiplayer
    game. It details the commands exchanged between client and server.
    The protocol is binary and TCP/UDP based and designed for readability and
    ease of implementation.

Table of Contents

1. Introduction ...................................................
2. Data Types and Conventions .....................................
3. Protocol Overview ..............................................
4. Packet Structure ...............................................
5. Command Reference ..............................................
6. Entity Types ...................................................
7. Security Considerations ........................................
8. IANA Considerations ............................................
9. References .....................................................

1. Introduction

    This document defines the R-Type Game Protocol, a binary-based protocol
    designed to facilitate real-time communication between a server and
    multiple clients. Unlike text-based protocols, this specification uses raw
    byte streams to minimize payload size and processing time, suitable for a
    high-paced arcade game.

    The protocol handles player identification, input transmission, entity
    synchronization (position, creation, deletion), and game state management.

2. Data Types and Conventions

    All multi-byte numeric values MUST be transmitted in Network Byte Order
    (Big Endian), unless otherwise specified.

    The following primitive types are used:

    uint8_t: Unsigned 8-bit integer (1 byte)

    uint16_t: Unsigned 16-bit integer (2 bytes)

    uint32_t: Unsigned 32-bit integer (4 bytes)

    uint64_t: Unsigned 64-bit integer (8 bytes)

    float: IEEE 754 32-bit floating point (4 bytes)

    Structure padding is disabled. All data is packed continuously.

3. Protocol Overview

    The communication lifecycle consists of three phases:
        1. Connection: Client obtains a Player ID (Opcode 0).
        2. Lobby: Clients select modes and join sessions (Opcodes 11-13).
        3. Gameplay: Real-time exchange of input and entity states
           (Opcodes 1-9).

4. Packet Structure

    Every packet consists of a 41-bits Header, composed of:

    -a 1-byte Operation Code (Opcode).

    -a 4-bytes Sequence Number.

    -a 1-bit Reliability boolean.

    This header is then followed immediately by the payload specific to that
    command.

    [ Header ] [ Payload (Variable Length) ... ]

5. Command Reference

    The following table defines the operation codes and their respective
    payloads. All multi-byte values are uint32_t or float unless specified.

    +--------+--------+------------------+------------------------------------+
    | Opcode | Sender | Command Name     | Payload Structure                  |
    +--------+--------+------------------+------------------------------------+
    | System & Reliability                                                    |
    +--------+--------+------------------+------------------------------------+
    | 0x00   | Server | ASSIGN_ID        | {uint32: playerId}                 |
    | 0x06   | Both   | ACKNOWLEDGE      | {uint32: sequenceNbr}              |
    | 0x07   | Server | ERROR_TCP        | {uint8:  errorId}                  |
    +--------+--------+------------------+------------------------------------+
    | Lobby Management                                                        |
    +--------+--------+------------------+------------------------------------+
    | 0x0A   | Both   | LEAVE_LOBBY      | {uint32: playerId}                 |
    | 0x0B   | Server | JOIN_LOBBY       | {uint32: lobbyId, u8: type, u32: c}|
    | 0x0C   | Client | SELECT_MODE      | {uint8:  type, uint32: playerId}   |
    | 0x0D   | Client | REQ_JOIN_LOBBY   | {uint32: playerId, uint32: code}   |
    +--------+--------+------------------+------------------------------------+
    | Gameplay & State                                                        |
    +--------+--------+------------------+------------------------------------+
    | 0x01   | Client | INPUT            | {uint32: pId, u8: key, bool: down} |
    | 0x02   | Server | POS_UPDATE       | {u32[]: IDs, f32[]: Xs, f32[]: Ys} |
    | 0x03   | Server | ENTITY_SPAWN     | {u32: id, u8: type, f32: x, f32: y}|
    | 0x04   | Server | ENTITY_DESTROY   | {uint32: entityId}                 |
    | 0x05   | Server | GAME_START       | { (None) }                         |
    | 0x08   | Server | SOUND_TRIGGER    | {uint8:  soundId}                  |
    | 0x09   | Server | TEXT_UPDATE      | {uint32: entityId, uint32: score}  |
    | 0x0E   | Server | PLAYER_DEATH     | {uint32: playerId}                 |
    | 0x0F   | Server | GAME_RESULT      | {bool:   isWin}                    |
    +--------+--------+------------------+------------------------------------+

5.1 Command Descriptions

    5.1.1 System & Reliability

        ASSIGN_ID (Opcode 0x00)
            Sent by the server to a newly connected client. This ID must be
            stored by the client for use in future identifying requests.

        ACKNOWLEDGE (Opcode 0x06)
            Used to implement a reliability layer. The recipient returns this
            packet to confirm receipt of a specific sequence number.

        ERROR_TCP (Opcode 0x07)
            Sent by the server when a protocol or lobby error occurs.
            errorId (uint8_t): Mapping to specific error strings.

    5.1.2 Lobby Management

        LEAVE_LOBBY (Opcode 0x0A)
            Notifies that a player is exiting the current lobby session.

        JOIN_LOBBY (Opcode 0x0B)
            Server confirmation of lobby entry. Contains the lobby ID,
            the visibility type, and the 4-byte join code.

        SELECT_MODE (Opcode 0x0C)
            Sent by the client to request a specific game mode/lobby type.

        REQ_JOIN_LOBBY (Opcode 0x0D)
            Sent by a client to join a specific room via its lobbyCode.

    5.1.3 Gameplay & State

        INPUT (Opcode 0x01)
            Reports key state changes (Pressed/Released) from client to server.

        POS_UPDATE (Opcode 0x02)
            Batch synchronization of all moving entities. Uses parallel arrays
            of IDs and coordinates to minimize packet headers.

        ENTITY_SPAWN (Opcode 0x03)
            Broadcast when a new object (Player, NPC, or Bullet) is created.

        ENTITY_DESTROY (Opcode 0x04)
            Broadcast when an entity is removed from the game world.

        GAME_START (Opcode 0x05)
            Signal that the game session has officially begun.

        SOUND_TRIGGER (Opcode 0x08)
            Commands the client to play a specific audio asset by ID.

        TEXT_UPDATE (Opcode 0x09)
            Updates client-side text elements, primarily for score tracking.

        PLAYER_DEATH (Opcode 0x0E)
            Notifies that a player entity has been destroyed.

        GAME_RESULT (Opcode 0x0F)
            Sent at session end. isWin (bool) determines victory or defeat.

6. Entity Types

    The type field in the ENTITY_SPAWN command corresponds to the following
    values (uint8_t):

    0x01 : Player
    0x02 : Monster
    0x03 : PlayerProjectile
    0x04 : MonsterProjectile

7. Security Considerations

    This protocol does not implement encryption or authentication. Packets can
    be easily intercepted or injected. It is designed for a controlled
    environment (LAN or VPN). Input validation MUST be performed on the server
    side to prevent out-of-bounds coordinates or invalid entity IDs.

8. IANA Considerations

    This document has no actions for IANA.

9. References

    [RFC7322] Flanagan, H., "RFC Style Guide", RFC 7322, September 2014.

    [RFC5741] L. Daigle, O. Kolkman, "RFC Streams, Headers, and Boilerplates",
              RFC 5741, December 2009.

    [RFC0768] Postel, J., "User Datagram Protocol", RFC 768, August 1980.

Authors' Addresses

    Théo Garcia
    Epitech Student, 3rd Year

    EMail: theo.garcia@epitech.eu


    Axel Desert
    Epitech Student, 3rd Year

    EMail: axel.desert@epitech.eu


    Raphaël Goncalves dos santos
    Epitech Student, 3rd Year

    EMail: raphael.goncalves-dos-santos@epitech.eu


    Aleksandra Racine
    Epitech Student, 3rd Year

    EMail: aleksandra.racine@epitech.eu


    Hélène Houplain
    Epitech Student, 3rd Year

    EMail: helene.houplain@epitech.eu